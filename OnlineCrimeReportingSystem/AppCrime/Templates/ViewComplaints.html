 {% extends 'base.html'%}
    {% block content%}
    {% if messages %}
        {% for message in messages %}
         {% if message.tags %}  <script>alert("{{ message }}")</script> {% endif %}

        {% endfor %}

    {% endif %}

<div style="background: url('/media/img/images/home.jpeg'); background-repeat:no-repeat;background-size:cover; color: white; height: 550px;  ">
	<br>
  <center>
  <div>
    <h2 style="color: black">View Complaints</h2>
    <hr>
  </div>
  </center> 



<!-- Modal -->
<div id="myModal" class="modal fade " role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" style="color: red" data-dismiss="modal">&times;</button>
        <h4 class="modal-title text-center" style="color: black;text-transform: uppercase;">Update Complaint Status</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal" action='/UpdateComplaint/'  method="POST" id="form2">
      {% csrf_token %}

        <div class="row" style="display: none">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">ID</label>
      <input type="text" class="form-control" name="UpdateCid" id="UpdateCid" readonly="">
      
    </div>
  </div>

  
  <div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">FullName</label>
      <input type="text" class="form-control" name="UpdateCName" id="UpdateCName"  readonly="">
      
    </div>
  </div>

<div class="row">
    <div class="col-md-6 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">Contact</label>
      <input type="text" class="form-control" name="UpdateCContact" id="UpdateCContact" readonly="">
      
    </div>
    <div class="col-md-6 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip02">Email</label>
      <input type="text" class="form-control" name="UpdateCEmail" id="UpdateCEmail"  readonly="">
      
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">Address</label>
      <input type="text" class="form-control" name="UpdateCAddress" id="UpdateCAddress"  readonly="">
      
    </div>
  </div>


<div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip02">Complaint Type</label>
      <input type="text" class="form-control" name="UpdateCComplainttype" id="UpdateCComplainttype" readonly="">
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip02">Complaint</label>
      <textarea rows="3" class="form-control" name="UpdateCComplaint" required="" id="UpdateCComplaint" readonly=""></textarea>
    </div>
  </div>

    <div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip02">Complaint</label>
      <select class="form-control" id="UpdateComplainStatus" name="UpdateComplainStatus" onchange="display(this);">
			<option  value="Select">Select</option>			
    		<option value="In Enquiry">In Enquiry</option>
    		<option value="Completed">Completed</option>
    		<option value="Closed">Closed</option>
		</select>
      
    </div>
  </div>


      </div>
      <div class="modal-footer">
        <button type="submit"  class="btn btn-success" > Submit</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
  </form>
    </div>

  </div>
</div>




<!-- Modal -->
<div id="myModal1" class="modal fade " role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" style="color: red" data-dismiss="modal">&times;</button>
        <h4 class="modal-title text-center"style="color: black;text-transform: uppercase;">Update Missing Complaint </h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal" action='/UpdateMissingComplaint/'  method="POST" id="form3">
      {% csrf_token %}

        <div class="row" style="display: none">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">ID</label>
      <input type="text" class="form-control" name="UpdateMid" id="UpdateMid" readonly="">
      
    </div>
  </div>


  
  <div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">FullName</label>
      <input type="text" class="form-control" name="UpdateMName" id="UpdateMName"  readonly="">
      
    </div>
  </div>

<div class="row">
    <div class="col-md-6 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">Contact</label>
      <input type="text" class="form-control" name="UpdateMContact" id="UpdateMContact" readonly="">
      
    </div>
    <div class="col-md-6 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip02">Email</label>
      <input type="text" class="form-control" name="UpdateMEmail" id="UpdateMEmail"  readonly="">
      
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip01">Address</label>
      <input type="text" class="form-control" name="UpdateMAddress" id="UpdateMAddress"  readonly="">
      
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 "style="margin-bottom: 2px">
      <label style="color: black"  for="validationTooltip01">MissingDetails</label>
      <textarea rows="3" class="form-control" name="UpdateMMissingDetails" required="" id="UpdateMMissingDetails" readonly=""></textarea>
      
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 "style="margin-bottom: 2px">
      <label style="color: black"  for="validationTooltip02">Photo</label>
      <center>
      <img src="img_girl.jpg" name="UpdateMPhoto" id="UpdateMPhoto" alt="Missing Person" width="100" height="100">
      </center>
      
    </div>
  </div>

   <div class="row">
    <div class="col-md-12 "style="margin-bottom: 10px">
      <label style="color: black"  for="validationTooltip02">Complaint</label>
      <select class="form-control" id="UpdateMissingComplainStatus" name="UpdateMissingComplainStatus" onchange="display(this);">
			<option  value="Select">Select</option>			
    		<option value="In Enquiry">In Enquiry</option>
    		<option value="Completed">Completed</option>
    		<option value="Closed">Closed</option>
		</select>
      
    </div>
  </div>



      </div>
      <div class="modal-footer">
        <button type="submit"  class="btn btn-success" > Submit</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
  </form>
    </div>

  </div>
</div>









<div class="col-md-12">
	<div class="col-md-3"  style="float:right;margin-right: 80px">
		<select class="form-control" id="ddComplain" name="ddComplain" onchange="display(this);">
			<option  value="Select">Select</option>			
    		<option value="Missing Complaints">Missing Complaints</option>
    		<option value="Complaints">Complaints</option>
		</select>
		<br>
	</div>	
</div>


	<center>
<div id="Complaintsdiv" class="container-fluid" style="margin-top: 1%;padding:5%">	
	<div class="table-responsive ">
	<table class="table table-striped table-bordered table-sm" style="background-color: white" >  
    <thead style="background-color: black;color: white" class="text-white">  
    <tr> 

    	 
        <th>Id</th>  
        <th>FullName</th>  
        <th>Contact </th>  
        <th>Email</th>  
        <th>Address</th>    
        <th>City</th> 
        <th>State</th>
        <th>Country</th> 
        <th>Pincode</th>
        <th>Complaint</th>
        <th>ComplaintType</th>
        <th>Status</th>
        <th>Update Status</th>

    </tr>  
    </thead>  
    <tbody>  


   
	{% for or in Complaint %}  
		<tr style="color: black;background-color: white">  
	        <td>{{ or.id }}</td>  
	        <td>{{ or.FullName }}</td>  
	        <td>{{ or.Contact }}</td>  
	        <td>{{ or.Email }}</td>  
	        <td>{{ or.Address }}</td>  
	        <td>{{ or.City }}</td> 
	        <td>{{ or.State }}</td> 
	        <td>{{ or.Country }}</td> 
	        <td>{{ or.Pincode }}</td>
            <td>{{ or.Complaint }}</td>
            <td>{{ or.ComplaintType }}</td>
            <td>{{ or.Status }}</td>
	        <td>   
	        	{% if  or.Status != 'Completed' and or.Status != 'Closed' %}
	            <input type="button" class="btn btn-info" id="{{ or.id }}${{ or.FullName }}${{ or.Contact }}${{ or.Email }}${{ or.Address }}${{ or.City }}${{ or.State }}${{ or.Country }}${{ or.Pincode }}${{ or.Complaint }}${{ or.ComplaintType }}" value="Update Status" onclick="updateComplaint(this)">
	            {% endif %}
	        </td>

		</tr> 
	{% endfor %} 

    </tbody>  
	</table>
</div>
</div>





<div id="MissingComplaintsdiv" class="" style="margin-top: 1%;padding:5%;display: none" >	
	<div class="table-responsive ">
	<table class="table table-striped table-bordered " style="background-color: white" >  
    <thead style="background-color: black;color: white" class="text-white">  
    <tr> 

    	 
        <th>Id</th>  
        <th>FullName</th>  
        <th>Contact </th>  
        <th>Email</th>  
        <th>Address</th>    
        <th>City</th> 
        <th>State</th>
        <th>Country</th> 
        <th>MissingDetails</th>
        <th>Photo</th>
        <th>Status</th>
        <th>Update Status</th>

    </tr>  
    </thead>  
    <tbody>  


    


   
	{% for or in MissingComplaint %}  
		<tr style="color: black;background-color: white">  
	        <td>{{ or.id }}</td>  
	        <td>{{ or.FullName }}</td>  
	        <td>{{ or.Contact }}</td>  
	        <td>{{ or.Email }}</td>  
	        <td>{{ or.Address }}</td>  
	        <td>{{ or.City }}</td> 
	        <td>{{ or.State }}</td> 
	        <td>{{ or.Country }}</td> 
            <td>{{ or.MissingDetails }}</td>
            <td>{{ or.Photo }}</td>
            <td>{{ or.Status }}</td>
            <td>   
	            <input type="button" class="btn btn-info" id="{{ or.id }}${{ or.FullName }}${{ or.Contact }}${{ or.Email }}${{ or.Address }}${{ or.City }}${{ or.State }}${{ or.Country }}${{ or.MissingDetails }}${{ or.Photo }}" value="Update" onclick="updateMissingComplaint(this)">  

	        </td> 
	        
		</tr> 
	{% endfor %} 

    </tbody>  
	</table>
</div>
</div>





</center>
	
</div>
<br>


<script type="text/javascript">
	
	function display(me) {
		
		var value = me.value;
		if(value != "Select")
		{
			if(value == "Complaints")
			{
				document.getElementById('Complaintsdiv').style.display = "block";
				document.getElementById('MissingComplaintsdiv').style.display = "none";

			}
			else if(value == "Missing Complaints")
			{
				document.getElementById('Complaintsdiv').style.display = "none";
				document.getElementById('MissingComplaintsdiv').style.display = "block";
			}
		}
		else
		{
			alert("Select is not an option")
		}
	}



	 function updateComplaint(me){

    var id = me.id;
    var str = id.split("$");
    var ids = str[0];
    var  FullName = str[1];
    var  Contact = str[2];
    var  Email = str[3];
    var  Address = str[4];
    var  City = str[5];
    var  State = str[6];
    var  Country = str[7];
    var  Complaint = str[8];
    var  ComplaintType = str[9];

    document.getElementById("UpdateCid").value = ids;
    document.getElementById("UpdateCName").value = FullName;
    document.getElementById("UpdateCContact").value = Contact;
    document.getElementById("UpdateCEmail").value = Email;
    document.getElementById("UpdateCAddress").value = Address;
    document.getElementById("UpdateCComplaint").value = Complaint;
    document.getElementById("UpdateCComplainttype").value = ComplaintType;

    $('#myModal').modal('show');
  }



   function updateMissingComplaint(me){




    var id = me.id;
    var str = id.split("$");
    var ids = str[0];
    var  FullName = str[1];
    var  Contact = str[2];
    var  Email = str[3];
    var  Address = str[4];
    var  City = str[5];
    var  State = str[6];
    var  Country = str[7];
    var  MissingDetails = str[8];
    var  Photo = str[9];


    document.getElementById("UpdateMid").value = ids;
    document.getElementById("UpdateMName").value = FullName;
    document.getElementById("UpdateMContact").value = Contact;
    document.getElementById("UpdateMEmail").value = Email;
    document.getElementById("UpdateMAddress").value = Address;
    document.getElementById("UpdateMMissingDetails").value = MissingDetails;
    document.getElementById("UpdateMPhoto").src = "/media/"+Photo;

    $('#myModal1').modal('show');
  }


</script>

    {% endblock%}